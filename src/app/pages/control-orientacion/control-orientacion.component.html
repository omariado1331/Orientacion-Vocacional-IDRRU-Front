<!-- control-orientacion.component.html - Template para el componente de control de orientación -->
<div class="container mt-4">
  <!-- Mostrar formulario de login si no está autenticado -->
  <div class="row" *ngIf="!isAuthenticated">
    <div class="col-md-6 offset-md-3 col-lg-4 offset-lg-4 mt-5">
      <div class="card shadow-lg" style="border-radius: var(--card-border-radius); overflow: hidden; border: none;">
        <!-- Encabezado con logo y título -->
        <div class="card-header text-white text-center py-4"
          style="background-color: var(--umsa-blue); border-bottom: 4px solid var(--umsa-accent);">
          <!-- Aquí puedes añadir un logo -->
          <div class="mb-2">
            <img src="{{ logoUrl }}" alt="UMSA Logo" height="60" *ngIf="logoUrl" onerror="this.style.display='none'">
          </div>
          <h2 class="mb-0" style="font-weight: 400;">Control de Orientación Vocacional</h2>
        </div>

        <div class="card-body p-4" style="background-color: var(--umsa-gray);">
          <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
            <!-- Mensaje de error con icono -->
            <div *ngIf="error" class="alert alert-danger d-flex align-items-center" role="alert">
              <i class="bi bi-exclamation-triangle-fill me-2"></i>
              <div>{{ error }}</div>
            </div>

            <!-- Campo de usuario -->
            <div class="mb-4">
              <label for="username" class="form-label fw-medium" style="color: var(--umsa-text);">
                <i class="bi bi-person-fill me-1"></i> Usuario:
              </label>
              <div class="input-group">
                <span class="input-group-text" style="background-color: var(--umsa-blue-light); color: white;">
                  <i class="bi bi-person"></i>
                </span>
                <input type="text" id="username" formControlName="username" class="form-control"
                  placeholder="Ingrese su nombre de usuario"
                  [ngClass]="{'is-invalid': loginForm.controls['username'].touched && loginForm.controls['username'].invalid}"
                  style="transition: all var(--transition-speed);" />
              </div>
              <div *ngIf="loginForm.controls['username'].touched && loginForm.controls['username'].invalid"
                class="invalid-feedback">
                <div *ngIf="loginForm.controls['username'].errors?.['required']">
                  <i class="bi bi-info-circle me-1"></i> El usuario es requerido
                </div>
                <div *ngIf="loginForm.controls['username'].errors?.['minlength']">
                  <i class="bi bi-info-circle me-1"></i> El usuario debe tener al menos 3 caracteres
                </div>
              </div>
            </div>

            <!-- Campo de contraseña -->
            <div class="mb-4">
              <label for="password" class="form-label fw-medium" style="color: var(--umsa-text);">
                <i class="bi bi-lock-fill me-1"></i> Contraseña:
              </label>
              <div class="input-group">
                <span class="input-group-text" style="background-color: var(--umsa-blue-light); color: white;">
                  <i class="bi bi-lock"></i>
                </span>
                <input type="password" id="password" formControlName="password" class="form-control"
                  placeholder="Ingrese su contraseña"
                  [ngClass]="{'is-invalid': loginForm.controls['password'].touched && loginForm.controls['password'].invalid}"
                  style="transition: all var(--transition-speed);" />
              </div>
              <div *ngIf="loginForm.controls['password'].touched && loginForm.controls['password'].invalid"
                class="invalid-feedback">
                <div *ngIf="loginForm.controls['password'].errors?.['required']">
                  <i class="bi bi-info-circle me-1"></i> La contraseña es requerida
                </div>
                <div *ngIf="loginForm.controls['password'].errors?.['minlength']">
                  <i class="bi bi-info-circle me-1"></i> La contraseña debe tener al menos 6 caracteres
                </div>
              </div>
            </div>

            <!-- Botón de envío -->
            <div class="d-grid gap-2">
              <button type="submit" class="btn py-3" [disabled]="loginForm.invalid || loading"
                style="background-color: var(--umsa-blue); color: white; font-weight: 600; border: none; transition: all var(--transition-speed);"
                onmouseover="this.style.backgroundColor='var(--umsa-blue-dark)'"
                onmouseout="this.style.backgroundColor='var(--umsa-blue)'">
                <span *ngIf="loading" class="spinner-border spinner-border-sm me-2"></span>
                <i class="bi bi-box-arrow-in-right me-2"></i>
                Iniciar Sesión
              </button>
            </div>
          </form>
        </div>

        <!-- Footer del formulario -->
        <div class="card-footer py-3 text-center" style="background-color: var(--umsa-blue-dark); color: white;">
          <small>Sistema de Orientación Vocacional IDRRU © 2025</small>
        </div>
      </div>
    </div>
  </div>
  <!-- Mostrar panel de control si está autenticado -->
  <div *ngIf="isAuthenticated">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h1>Panel de Control - Orientación Vocacional</h1>
      <button class="btn btn-outline-danger" (click)="logout()">Cerrar Sesión</button>
    </div>

    <div class="row">
      <!-- Tarjeta de estadísticas: Estudiantes -->
      <div class="col-md-4 mb-4">
        <div class="card h-100 shadow">
          <div class="card-body text-center">
            <h5 class="card-title">Estudiantes Registrados</h5>
            <div class="display-2 fw-bold text-primary">{{ datosControl.totalEstudiantes }}</div>
            <p class="card-text">Total de estudiantes que han ingresado al sistema</p>
          </div>
        </div>
      </div>

      <!-- Tarjeta de estadísticas: Facultades -->
      <div class="col-md-4 mb-4">
        <div class="card h-100 shadow">
          <div class="card-body text-center">
            <h5 class="card-title">Facultades Activas</h5>
            <div class="display-2 fw-bold text-success">{{ datosControl.facultadesActivas }}</div>
            <p class="card-text">Número de facultades participantes</p>
          </div>
        </div>
      </div>

      <!-- Tarjeta de estadísticas: Orientaciones -->
      <div class="col-md-4 mb-4">
        <div class="card h-100 shadow">
          <div class="card-body text-center">
            <h5 class="card-title">Orientaciones Completadas</h5>
            <div class="display-2 fw-bold text-info">{{ datosControl.orientacionesCompletadas }}</div>
            <p class="card-text">Procesos de orientación finalizados</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Sección para futuros reportes o gráficos -->
    <div class="row mt-4">
      <div class="col-12">
        <div class="card shadow">
          <div class="card-header bg-light">
            <h4>Estadísticas Detalladas</h4>
          </div>
          <div class="card-body">
            <p class="card-text">
              Esta sección mostrará gráficos y reportes detallados sobre orientación vocacional.
              Puede incluir distribución por facultades, tendencias temporales, resultados de evaluaciones, etc.
            </p>
            <div class="alert alert-info">
              <i class="bi bi-info-circle-fill me-2"></i>
              Datos e informes más detallados estarán disponibles en la próxima versión.
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>